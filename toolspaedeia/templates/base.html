<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="toolspaedeia, tools, paedeia, education">
        <meta name="description"
              content="Toolspaedeia is am education tool that helps students learn about tools and practices.">
        <meta name="color-scheme" content="light dark">
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.pumpkin.min.css">
        <title>{{ title }}</title>
        {% block head %}
            <script type="module" defer>
                const sunIcon = "&#9728;";
                const moonIcon = "&#127769;";
                const savedTheme = localStorage.getItem('theme');
                const themeToggleButton = document.getElementById('theme-toggle');

                if (savedTheme) {
                    document.documentElement.setAttribute('data-theme', savedTheme);
                    themeToggleButton.innerHTML = savedTheme === 'dark' ? moonIcon : sunIcon;
                } else {
                    const prefersDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                    if (prefersDarkMode) {
                        document.documentElement.setAttribute('data-theme', 'dark');
                        localStorage.setItem('theme', 'dark');
                        themeToggleButton.innerHTML = moonIcon;
                    } else {
                        document.documentElement.setAttribute('data-theme', 'light');
                        localStorage.setItem('theme', 'light');
                        themeToggleButton.innerHTML = sunIcon;
                    }
                }

                export const toggleTheme = () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    themeToggleButton.innerHTML = newTheme === 'dark' ? moonIcon : sunIcon;
                }

                themeToggleButton.addEventListener('click', toggleTheme);
            </script>
        {% endblock head %}
    </head>
    <body>
        <header>
            <nav>
                {% block nav %}
                    <ul>
                        <li>
                            <a href="{% url 'savings:savings_accounts_list' %}">Savings</a>
                        </li>
                        <li>
                            <a href="{% url 'courses:course_list' %}">Courses</a>
                        </li>
                    </ul>
                    <ul>
                        <li>
                            <button id="theme-toggle" aria-label="Toggle theme"></button>
                        </li>
                    </ul>
                {% endblock nav %}
            </nav>
        </header>
        <main>
            {% block content %}
            {% endblock content %}
        </main>
    </body>
</html>
